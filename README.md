Предварительные требования

Установка библиотек: Запусти в терминале (или в виртуальном окружении):textpip install opencv-python face-recognition flask gtts playsound
opencv-python: Для захвата видео и обработки кадров.
face-recognition: Для детекции и сравнения лиц (основана на dlib, очень простая в использовании).
flask: Для простого веб-сервера.
gtts: Для текст-в-речь (Google Text-to-Speech).
playsound: Для воспроизведения аудио.

База данных лиц: Создай папку known_faces в директории проекта. Положи туда изображения известных людей (например, person1.jpg, person2.jpg). Каждое изображение должно содержать одно лицо. Программа загрузит их encodings (векторы) при запуске.
RTSP URL: Замени в коде rtsp_url на свой реальный URL из Trassir.
Запуск: Программа будет обрабатывать видео в реальном времени в отдельном потоке, а веб-сервер — в основном. Оповещения будут отображаться на странице http://localhost:5000 (или на другом хосте, если настроишь).


Как это работает

Загрузка базы: Программа сканирует папку known_faces и извлекает векторы лиц (encodings) с помощью face_recognition.
Обработка видео: В отдельном потоке захватывается RTSP-поток. Каждый кадр уменьшается, детектируются лица, сравниваются с базой. Если совпадение (с порогом 0.6), добавляется оповещение в список, синтезируется речь и воспроизводится.
Веб-интерфейс: Flask запускает сервер на порту 5000. Страница http://localhost:5000 показывает список последних оповещений (обновляется автоматически через JS).
Голос: При совпадении генерируется MP3 с сообщением и воспроизводится на машине, где запущена программа. Если хочешь на веб-странице — это сложнее (нужен Web Audio API), но для простоты сделал локально.

Советы и улучшения

Производительность: Если медленно, уменьши частоту обработки кадров (увеличь time.sleep).
Ошибки RTSP: Trassir может требовать аутентификацию — убедись, что URL правильный. Если поток прерывается, программа переподключается.
База данных: Для большой базы используй pickle для кэширования encodings (добавь сохранение/загрузку).
Голос на веб: Если нужно, можно добавить JS на странице для воспроизведения аудио, но это потребует хранения MP3 на сервере.
Безопасность: Не используй в проде без HTTPS, если доступ извне.
Тестирование: Сначала протестируй RTSP в VLC, чтобы убедиться, что URL работает.
